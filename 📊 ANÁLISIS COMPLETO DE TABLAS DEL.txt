üìä AN√ÅLISIS COMPLETO DE TABLAS DEL SISTEMA
Bas√°ndome en el c√≥digo de los servicios, estas son TODAS las tablas que usa el sistema:
üóÇÔ∏è GRUPO 1: P√ÅGINAS Y TIPOS DE P√ÅGINA
1.1 tipos_pagina
Qu√© es: Cat√°logo de tipos de p√°gina disponibles en el sistema (homepage, propiedades, videos, etc.) Qui√©n la usa: tenantPaginasService.ts Columnas clave:
codigo, nombre, descripcion, categoria
plan_minimo - plan requerido para usar esta p√°gina
nivel - orden jer√°rquico
es_estandar, es_plantilla, protegida
1.2 tenant_paginas_activas
Qu√© es: Qu√© p√°ginas tiene ACTIVADAS cada tenant Qui√©n la usa: tenantPaginasService.ts Columnas clave:
tenant_id, tipo_pagina
is_visible - si el plan del tenant le permite verla
is_enabled - si el tenant la activ√≥
variante_activa - qu√© variante est√° usando (default, variant1, etc.)
configuracion_variantes (JSONB) - configuraci√≥n guardada de cada variante
1.3 paginas_web
Qu√© es: P√°ginas CONCRETAS creadas por cada tenant Qui√©n la usa: paginasService.ts Columnas clave:
id, tenant_id, tipo_pagina
titulo, slug, descripcion
contenido (JSONB), meta (JSONB)
publica, activa, orden, origen (sistema/custom)
variante, plantilla_id
configuracion_activa_id - referencia a paginas_configuraciones
üß© GRUPO 2: COMPONENTES/SECCIONES
2.1 catalogo_componentes ‚úÖ IMPORTANTE
Qu√© es: Cat√°logo del sistema con TODOS los componentes disponibles (headers, heroes, CTAs, grids, etc.) Qui√©n la usa: seccionesService.ts Columnas clave:
tipo - header, footer, hero, cta, property_grid, etc.
nombre, descripcion, icono, categoria
variantes (JSONB) - array de variantes disponibles: [{id, nombre, descripcion}]
campos_config (JSONB) - schema de configuraci√≥n
es_global, disponible, orden
2.2 componentes_web ‚úÖ TABLA PRINCIPAL
Qu√© es: Instancias de componentes configurados por cada tenant Qui√©n la usa: seccionesService.ts Columnas clave:
id, tenant_id, tipo, variante, nombre
datos (JSONB) - configuraci√≥n del componente
activo, orden
scope - 'tenant' | 'page_type' | 'page'
tipo_pagina, pagina_id
es_activo - si esta variante es la activa para renderizar
config_completa - si tiene todos los campos requeridos
üìù GRUPO 3: CONTENIDO PERSISTENTE
3.1 catalogo_campos
Qu√© es: Define qu√© campos tiene cada tipo+variante de componente Qui√©n la usa: contenidoService.ts Columnas clave:
tipo_componente, variante, campo
tipo_campo - text, image, array, object, etc.
categoria - 'static_data' o 'media'
etiqueta, descripcion, valor_default
traducible, requerido, orden
3.2 contenido_campos
Qu√© es: Contenido textual/JSON de cada componente por idioma Qui√©n la usa: contenidoService.ts Columnas clave:
componente_id, campo, idioma
valor (text), valor_json (JSONB)
version, actualizado_por
3.3 contenido_media
Qu√© es: Im√°genes/videos de cada componente Qui√©n la usa: contenidoService.ts Columnas clave:
componente_id, campo, tipo_media
url, alt_text, traducciones_alt
metadata (JSONB), orden
üîó GRUPO 4: RELACIONES P√ÅGINA-COMPONENTE
4.1 paginas_componentes
Qu√© es: Relaci√≥n N:M entre p√°ginas y componentes globales Qui√©n la usa: seccionesService.ts - funciones agregarComponenteAPagina, getComponentesPagina Columnas clave:
pagina_id, componente_id
orden, activo
üé® GRUPO 5: PLANTILLAS Y CONFIGURACIONES
5.1 plantillas_pagina
Qu√© es: Templates predefinidos para p√°ginas (ej: "Homepage Modern", "Property Grid Classic") Qui√©n la usa: paginasService.ts Columnas clave:
id, codigo, tipo_pagina, nombre
componentes (JSONB) - array de componentes del template
configuracion_default (JSONB), estilos (JSONB)
visible, featured, es_premium
5.2 paginas_configuraciones
Qu√© es: Versiones/configuraciones guardadas de una p√°gina (system versioning) Qui√©n la usa: paginasService.ts Columnas clave:
id, pagina_id, nombre
plantilla_id, componentes (JSONB), meta (JSONB)
es_activa
5.3 paginas_alias
Qu√© es: Traducciones de slugs/t√≠tulos de p√°ginas (multi-idioma) Qui√©n la usa: paginasService.ts Columnas clave:
pagina_id, idioma, slug_alias
titulo_alias, descripcion_alias, activo
üåç GRUPO 6: IDIOMAS
6.1 idiomas
Qu√© es: Cat√°logo de idiomas soportados por el sistema Qui√©n la usa: paginasService.ts Columnas clave:
codigo (es, en, fr, pt)
nombre, nombre_nativo
activo, prioridad
üìä RESUMEN EJECUTIVO
Tablas para Tipos de P√°gina (3 tablas):
tipos_pagina - Cat√°logo del sistema
tenant_paginas_activas - Qu√© tiene activado cada tenant
paginas_web - P√°ginas concretas creadas
Tablas para Componentes/Secciones (3 tablas):
catalogo_componentes - Cat√°logo del sistema
componentes_web - Instancias configuradas por tenant
paginas_componentes - Relaci√≥n p√°gina-componente
Tablas para Contenido (3 tablas):
catalogo_campos - Schema de campos por componente
contenido_campos - Valores textuales/JSON
contenido_media - Im√°genes/videos
Tablas para Templates y Versioning (3 tablas):
plantillas_pagina - Templates predefinidos
paginas_configuraciones - Versiones de p√°ginas
paginas_alias - Traducciones multi-idioma
Tablas de Soporte (1 tabla):
idiomas - Idiomas disponibles
‚úÖ TOTAL: 13 TABLAS EN USO